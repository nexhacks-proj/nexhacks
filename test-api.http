### Test the Pipeline API Endpoint
### Use with REST Client extension in VS Code, or copy to Postman

@baseUrl = http://localhost:3000
@contentType = application/json

### Test 1: Basic Pipeline Test
POST {{baseUrl}}/api/candidates/pipeline
Content-Type: {{contentType}}

{
  "rawResume": "John Doe\nEmail: john@example.com\nLocation: San Francisco\n\nEXPERIENCE\n\nSenior Software Engineer | TechCorp | 2020-Present\n- Built scalable microservices\n- Led team of 5 engineers\n\nSKILLS\nReact, TypeScript, Node.js, AWS",
  "job": {
    "id": "test-job",
    "title": "Senior Full-Stack Engineer",
    "techStack": ["React", "TypeScript", "Node.js"],
    "experienceLevel": "3+",
    "visaSponsorship": false,
    "startupExperiencePreferred": true,
    "portfolioRequired": false,
    "createdAt": "2024-01-01T00:00:00.000Z"
  },
  "promptVariant": "A",
  "enableTracing": false
}

### Test 2: With Founder Preferences
POST {{baseUrl}}/api/candidates/pipeline
Content-Type: {{contentType}}

{
  "rawResume": "Jane Smith\nEmail: jane@example.com\n\nEXPERIENCE\n\nFull-Stack Developer | StartupCo | 2019-2023\n- Built React frontend with 50K+ users\n- Python backend APIs\n\nSKILLS\nReact, Python, PostgreSQL, Docker",
  "job": {
    "id": "test-job-2",
    "title": "Full-Stack Engineer",
    "techStack": ["React", "Python"],
    "experienceLevel": "1-3",
    "visaSponsorship": false,
    "startupExperiencePreferred": true,
    "portfolioRequired": false,
    "createdAt": "2024-01-01T00:00:00.000Z"
  },
  "founderPrefs": {
    "founder_name": "Alex Johnson",
    "company_name": "TechStartup",
    "founder_title": "CEO",
    "tone": "friendly",
    "interview_type": "30-min video call",
    "time_window": "next week",
    "scheduling_link": "https://cal.com/alex",
    "location_policy": "Remote",
    "compensation_note": null
  },
  "promptVariant": "A",
  "enableTracing": false
}

### Test 3: A/B Variant B
POST {{baseUrl}}/api/candidates/pipeline
Content-Type: {{contentType}}

{
  "rawResume": "John Doe\nEmail: john@example.com\nLocation: San Francisco\n\nEXPERIENCE\n\nSenior Software Engineer | TechCorp | 2020-Present\n- Built scalable microservices\n- Led team of 5 engineers\n\nSKILLS\nReact, TypeScript, Node.js, AWS",
  "job": {
    "id": "test-job",
    "title": "Senior Full-Stack Engineer",
    "techStack": ["React", "TypeScript", "Node.js"],
    "experienceLevel": "3+",
    "visaSponsorship": false,
    "startupExperiencePreferred": true,
    "portfolioRequired": false,
    "createdAt": "2024-01-01T00:00:00.000Z"
  },
  "promptVariant": "B",
  "enableTracing": false
}

### Test 4: Legacy Endpoint with New Pipeline
POST {{baseUrl}}/api/candidates/parse
Content-Type: {{contentType}}

{
  "rawResume": "John Doe\nEmail: john@example.com\n\nEXPERIENCE\n\nSenior Software Engineer | TechCorp | 2020-Present",
  "name": "John Doe",
  "email": "john@example.com",
  "job": {
    "id": "test-job",
    "title": "Senior Full-Stack Engineer",
    "techStack": ["React", "TypeScript"],
    "experienceLevel": "3+",
    "visaSponsorship": false,
    "startupExperiencePreferred": true,
    "portfolioRequired": false,
    "createdAt": "2024-01-01T00:00:00.000Z"
  },
  "useNewPipeline": true,
  "promptVariant": "A"
}
